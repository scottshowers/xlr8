/* ============================================================
   XLR8 UNIFIED DESIGN SYSTEM
   ============================================================
   
   Design: Enterprise-professional for experienced consultants
   NO emojis. Lucide icons with text labels.
   
   Phase 4A UX Overhaul - January 16, 2026
   ============================================================ */

:root {
  /* ==========================================
     HCMPACT BRAND PALETTE
     ========================================== */
  --white: #ffffff;
  --off-white: #f4f5f7;
  
  /* Primary Brand */
  --grass-green: #83b16d;
  --grass-green-dark: #5a8a4a;
  --grass-green-hover: #6b9b5a;
  --grass-green-alpha-5: rgba(131, 177, 109, 0.05);
  --grass-green-alpha-10: rgba(131, 177, 109, 0.1);
  --grass-green-alpha-20: rgba(131, 177, 109, 0.2);

  /* Blues */
  --electric-blue: #2766b1;
  --electric-blue-alpha-10: rgba(39, 102, 177, 0.1);
  --sky-blue: #93abd9;
  --accent: #285390;
  --accent-alpha-10: rgba(40, 83, 144, 0.1);
  
  /* Cool Neutrals */
  --ice-flow: #c9d3d4;
  --clearwater: #b2d6de;
  --aquamarine: #a1c3d4;
  
  /* Accent Colors */
  --scarlet: #993c44;
  --scarlet-light: rgba(153, 60, 68, 0.1);
  --purple: #5f4282;
  --purple-light: rgba(95, 66, 130, 0.1);
  --amber: #d97706;
  --amber-light: rgba(217, 119, 6, 0.1);

  /* Semantic Colors */
  --bg-primary: #f4f5f7;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f9fafb;
  --text-primary: #1a1a2e;
  --text-secondary: #4b5563;
  --text-muted: #9ca3af;
  --border: #e1e4e8;
  --border-light: #f0f4f7;

  /* Status Colors (using brand) */
  --critical: #993c44;
  --critical-light: rgba(153, 60, 68, 0.1);
  --warning: #d97706;
  --warning-light: rgba(217, 119, 6, 0.1);
  --info: #2766b1;
  --info-light: rgba(39, 102, 177, 0.1);
  --success: #83b16d;
  --success-light: rgba(131, 177, 109, 0.1);

  /* Flow Bar (Electric Blue - pops against green) */
  --flow-blue: #2766b1;
  --flow-blue-alpha-10: rgba(39, 102, 177, 0.1);

  /* Typography */
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --text-xs: 0.6875rem;
  --text-sm: 0.8125rem;
  --text-base: 0.875rem;
  --text-lg: 1rem;
  --text-xl: 1.125rem;
  --text-2xl: 1.375rem;
  --text-3xl: 1.5rem;
  --weight-normal: 400;
  --weight-medium: 500;
  --weight-semibold: 600;
  --weight-bold: 700;

  /* Spacing */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.1);

  /* Transitions */
  --transition-fast: 0.15s ease;
  --transition-base: 0.2s ease;

  /* Layout */
  --header-height: 56px;
  --sidebar-width: 220px;
  --sidebar-collapsed: 60px;
  --flow-bar-height: 48px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: var(--font-body);
  font-size: var(--text-base);
  background: var(--bg-primary);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  line-height: 1.5;
}

.xlr8-app {
  min-height: 100vh;
  background: var(--bg-primary);
}

/* ============================================================
   HEADER
   ============================================================ */

.xlr8-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-height);
  background: var(--white);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--space-5);
  z-index: 100;
}

.xlr8-header__left { display: flex; align-items: center; }

.xlr8-header__logo {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  cursor: pointer;
}

.xlr8-header__logo-img { width: 32px; height: 32px; }

.xlr8-header__logo-text {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.xlr8-header__logo-name {
  font-size: var(--text-lg);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
}

.xlr8-header__logo-divider {
  color: var(--text-muted);
  font-weight: var(--weight-normal);
}

.xlr8-header__logo-tagline {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-muted);
  letter-spacing: 0.3px;
}

.xlr8-header__center {
  flex: 1;
  display: flex;
  justify-content: center;
  padding: 0 var(--space-8);
}

.xlr8-header__search {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  width: 100%;
  max-width: 400px;
  color: var(--text-muted);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.xlr8-header__search:hover { border-color: var(--grass-green); }

.xlr8-header__right {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.xlr8-header__btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  color: var(--text-secondary);
  position: relative;
  transition: all var(--transition-fast);
}

.xlr8-header__btn:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.xlr8-header__notification-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  width: 18px;
  height: 18px;
  background: var(--critical);
  color: var(--white);
  font-size: 10px;
  font-weight: var(--weight-semibold);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
}

.xlr8-header__user-menu {
  position: relative;
  margin-left: var(--space-2);
  padding-left: var(--space-4);
  border-left: 1px solid var(--border);
}

.xlr8-header__user {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  cursor: pointer;
  padding: var(--space-1);
  border-radius: var(--radius-md);
  transition: background var(--transition-fast);
}

.xlr8-header__user:hover { background: var(--bg-primary); }

.xlr8-header__avatar {
  width: 32px;
  height: 32px;
  background: var(--grass-green);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--white);
  font-weight: var(--weight-semibold);
  font-size: var(--text-sm);
}

.xlr8-header__user-info { text-align: left; }

.xlr8-header__user-name {
  display: block;
  font-weight: var(--weight-semibold);
  font-size: var(--text-sm);
  color: var(--text-primary);
}

.xlr8-header__user-role {
  display: block;
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.xlr8-header__dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: var(--space-2);
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 160px;
  z-index: 200;
}

.xlr8-header__dropdown-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  width: 100%;
  padding: var(--space-3) var(--space-4);
  background: none;
  border: none;
  font-size: var(--text-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.xlr8-header__dropdown-item:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

/* ============================================================
   SIDEBAR
   ============================================================ */

.xlr8-sidebar {
  position: fixed;
  top: var(--header-height);
  left: 0;
  bottom: 0;
  width: var(--sidebar-width);
  background: var(--white);
  border-right: 1px solid var(--border);
  padding: var(--space-4) 0;
  overflow-y: auto;
  overflow-x: visible;
  z-index: 90;
  transition: width var(--transition-base);
}

.xlr8-sidebar--collapsed { 
  width: var(--sidebar-collapsed); 
  overflow: visible;
}

.xlr8-sidebar__section { margin-bottom: var(--space-6); }

.xlr8-sidebar__section-title {
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 0 var(--space-4);
  margin-bottom: var(--space-2);
  white-space: nowrap;
  overflow: hidden;
  transition: opacity var(--transition-fast);
}

.xlr8-sidebar--collapsed .xlr8-sidebar__section-title {
  opacity: 0;
  height: 0;
  margin: 0;
  padding: 0;
}

.xlr8-sidebar__item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  margin: 0 var(--space-2);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  white-space: nowrap;
}

.xlr8-sidebar__item:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.xlr8-sidebar__item--active {
  background: var(--grass-green-alpha-10);
  color: var(--grass-green);
}

.xlr8-sidebar__icon { flex-shrink: 0; }
.xlr8-sidebar__label { flex: 1; overflow: hidden; }

.xlr8-sidebar--collapsed .xlr8-sidebar__item {
  justify-content: center;
  padding: var(--space-3);
  margin: var(--space-1) var(--space-2);
}

.xlr8-sidebar--collapsed .xlr8-sidebar__label { display: none; }

.xlr8-sidebar--collapsed .xlr8-sidebar__item::after {
  content: attr(data-tooltip);
  position: absolute;
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
  background: var(--text-primary);
  color: var(--white);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-fast);
  z-index: 1000;
  pointer-events: none;
  box-shadow: var(--shadow-md);
}

.xlr8-sidebar--collapsed .xlr8-sidebar__item:hover::after {
  opacity: 1;
  visibility: visible;
}

.xlr8-sidebar-toggle {
  position: fixed;
  top: calc(var(--header-height) + 12px);
  left: calc(var(--sidebar-width) - 12px);
  width: 24px;
  height: 24px;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 95;
  color: var(--text-muted);
  transition: all var(--transition-base);
  box-shadow: var(--shadow-sm);
}

.xlr8-sidebar-toggle:hover {
  background: var(--grass-green);
  color: var(--white);
  border-color: var(--grass-green);
}

.xlr8-sidebar-toggle--collapsed {
  left: calc(var(--sidebar-collapsed) - 12px);
}

/* ============================================================
   FLOW BAR
   ============================================================ */

.xlr8-flow-bar {
  position: fixed;
  top: var(--header-height);
  left: var(--sidebar-width);
  right: 0;
  height: var(--flow-bar-height);
  background: var(--white);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 80;
  padding: 0 var(--space-6);
}

.xlr8-flow-bar__steps {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.xlr8-flow-bar__arrow {
  color: var(--border);
  font-size: var(--text-sm);
  padding: 0 var(--space-1);
}

.xlr8-flow-step {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.xlr8-flow-step:hover { color: var(--text-secondary); }

.xlr8-flow-step__num {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-full);
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
}

.xlr8-flow-step__label { font-size: var(--text-sm); }

.xlr8-flow-step--completed { color: var(--flow-blue); }
.xlr8-flow-step--completed .xlr8-flow-step__num {
  background: var(--flow-blue);
  color: var(--white);
}

.xlr8-flow-step--current {
  background: var(--flow-blue-alpha-10);
  color: var(--flow-blue);
}
.xlr8-flow-step--current .xlr8-flow-step__num {
  background: var(--flow-blue);
  color: var(--white);
}

/* ============================================================
   MAIN CONTENT
   ============================================================ */

.xlr8-main {
  margin-left: var(--sidebar-width);
  margin-top: var(--header-height);
  padding: var(--space-6);
  min-height: calc(100vh - var(--header-height));
}

.xlr8-main--with-flow {
  margin-top: calc(var(--header-height) + var(--flow-bar-height));
}

/* ============================================================
   PAGE COMPONENTS
   ============================================================ */

.page-header { margin-bottom: var(--space-6); }
.page-title {
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--space-1);
}
.page-subtitle {
  font-size: var(--text-base);
  color: var(--text-secondary);
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-4);
}
.section-title {
  font-size: var(--text-lg);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}

/* Cards */
.card {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}
.card-header {
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.card-title {
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}
.card-body { padding: var(--space-5); }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
  border: none;
  white-space: nowrap;
}
.btn-primary {
  background: var(--grass-green);
  color: var(--white);
}
.btn-primary:hover { background: var(--grass-green-hover); }
.btn-secondary {
  background: var(--white);
  color: var(--text-secondary);
  border: 1px solid var(--border);
}
.btn-secondary:hover {
  background: var(--bg-primary);
  border-color: var(--text-muted);
}
.btn-sm { padding: var(--space-1) var(--space-3); font-size: var(--text-sm); }
.btn-lg { padding: var(--space-3) var(--space-5); font-size: var(--text-base); }

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-4);
  margin-bottom: var(--space-6);
}
.stat-card {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
}
.stat-label {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-secondary);
  margin-bottom: var(--space-2);
}
.stat-value {
  font-size: 28px;
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  line-height: 1;
}
.stat-value--critical { color: var(--critical); }
.stat-value--warning { color: var(--warning); }
.stat-value--success { color: var(--grass-green); }
.stat-detail {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-top: var(--space-2);
}

/* Attention List */
.attention-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  margin-bottom: var(--space-8);
}
.attention-item {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
}
.attention-item:hover {
  border-color: var(--grass-green);
  box-shadow: var(--shadow-md);
}
.attention-indicator {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  flex-shrink: 0;
}
.attention-indicator--critical { background: var(--critical); }
.attention-indicator--warning { background: var(--warning); }
.attention-content { flex: 1; }
.attention-title {
  font-weight: var(--weight-semibold);
  font-size: var(--text-base);
  color: var(--text-primary);
  margin-bottom: 2px;
}
.attention-meta {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}
.attention-action {
  color: var(--grass-green);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
}

/* Project Cards */
.projects-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
}
.project-card {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  cursor: pointer;
  transition: all var(--transition-fast);
}
.project-card:hover {
  border-color: var(--grass-green);
  box-shadow: var(--shadow-md);
}
.project-card__header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-3);
}
.project-card__avatar {
  width: 40px;
  height: 40px;
  background: var(--grass-green);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--white);
  font-weight: var(--weight-semibold);
  font-size: var(--text-base);
}
.project-card__name {
  font-weight: var(--weight-semibold);
  font-size: var(--text-base);
  color: var(--text-primary);
}
.project-card__system {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}
.project-card__stats {
  display: flex;
  gap: var(--space-4);
  padding-top: var(--space-3);
  border-top: 1px solid var(--border);
}
.project-stat { text-align: center; }
.project-stat__value {
  font-size: var(--text-xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
}
.project-stat__value--critical { color: var(--critical); }
.project-stat__value--warning { color: var(--warning); }
.project-stat__value--success { color: var(--grass-green); }
.project-stat__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

/* Hub Layout */
.hub-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-6);
  padding-bottom: var(--space-6);
  border-bottom: 1px solid var(--border);
}
.hub-header__left {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}
.hub-avatar {
  width: 56px;
  height: 56px;
  background: var(--grass-green);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--white);
  font-weight: var(--weight-bold);
  font-size: var(--text-xl);
}
.hub-title {
  font-size: var(--text-3xl);
  font-weight: var(--weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--space-1);
}
.hub-meta {
  display: flex;
  gap: var(--space-4);
  font-size: var(--text-sm);
  color: var(--text-secondary);
}
.hub-meta span {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}
.hub-actions { display: flex; gap: var(--space-3); }
.hub-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: var(--space-6);
}
.hub-main, .hub-sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
}

/* Quick Actions */
.quick-actions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-3);
}
.quick-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-5) var(--space-4);
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: center;
}
.quick-action:hover {
  background: var(--grass-green-alpha-5);
  border-color: var(--grass-green);
}
.quick-action svg { color: var(--grass-green); }
.quick-action__label {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-secondary);
}

/* Findings Summary */
.findings-summary { display: flex; gap: var(--space-6); }
.finding-stat { text-align: center; }
.finding-stat__value {
  font-size: var(--text-3xl);
  font-weight: var(--weight-bold);
  line-height: 1;
  margin-bottom: var(--space-1);
}
.finding-stat__value--critical { color: var(--critical); }
.finding-stat__value--warning { color: var(--warning); }
.finding-stat__value--info { color: var(--info); }
.finding-stat__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
  text-transform: uppercase;
}

/* Progress Bar */
.progress-bar {
  height: 8px;
  background: var(--bg-primary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}
.progress-bar__fill {
  height: 100%;
  background: var(--grass-green);
  border-radius: var(--radius-sm);
  transition: width var(--transition-base);
}

/* Tables */
.table-container {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}
.table { width: 100%; border-collapse: collapse; }
.table th {
  text-align: left;
  padding: var(--space-3) var(--space-4);
  background: var(--bg-tertiary);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border);
}
.table td {
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-sm);
  color: var(--text-primary);
  border-bottom: 1px solid var(--border);
}
.table tr:last-child td { border-bottom: none; }
.table tr:hover td { background: var(--bg-tertiary); }

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: 2px var(--space-2);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
}
.badge--critical { background: var(--critical-light); color: var(--critical); }
.badge--warning { background: var(--warning-light); color: var(--warning); }
.badge--info { background: var(--info-light); color: var(--info); }
.badge--success { background: var(--success-light); color: var(--success); }

/* Forms */
.form-group { margin-bottom: var(--space-4); }
.form-label {
  display: block;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  margin-bottom: var(--space-2);
}
.form-input {
  width: 100%;
  padding: var(--space-3);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  color: var(--text-primary);
  background: var(--white);
  transition: border-color var(--transition-fast);
}
.form-input:focus {
  outline: none;
  border-color: var(--grass-green);
}
.form-input::placeholder { color: var(--text-muted); }
.form-select {
  width: 100%;
  padding: var(--space-3);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  color: var(--text-primary);
  background: var(--white);
  cursor: pointer;
}
.form-hint {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-top: var(--space-1);
}
.form-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

/* Utility Classes */
.text-critical { color: var(--critical); }
.text-warning { color: var(--warning); }
.text-success { color: var(--grass-green); }
.text-info { color: var(--info); }
.text-muted { color: var(--text-muted); }
.mt-2 { margin-top: var(--space-2); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: var(--space-2); }
.gap-4 { gap: var(--space-4); }
.gap-6 { gap: var(--space-6); }

/* Responsive */
@media (max-width: 1200px) {
  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .projects-grid { grid-template-columns: repeat(2, 1fr); }
  .hub-grid { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
  .stats-grid { grid-template-columns: 1fr; }
  .projects-grid { grid-template-columns: 1fr; }
  .quick-actions { grid-template-columns: repeat(2, 1fr); }
  .xlr8-header__search { display: none; }
  .xlr8-header__user-info { display: none; }
}

/* ============================================================
   UPLOAD PAGE
   ============================================================ */

.dropzone {
  border: 2px dashed var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-8);
  text-align: center;
  cursor: pointer;
  transition: all var(--transition-fast);
  background: var(--bg-tertiary);
}

.dropzone:hover,
.dropzone--active {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-5);
}

.file-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.file-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.btn-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  color: var(--text-muted);
  transition: all var(--transition-fast);
}

.btn-icon:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.alert {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
}

.alert--error {
  background: var(--critical-light);
  color: var(--critical);
  border: 1px solid var(--critical);
}

.alert--warning {
  background: var(--warning-light);
  color: var(--warning);
  border: 1px solid var(--warning);
}

.alert--info {
  background: var(--info-light);
  color: var(--info);
  border: 1px solid var(--info);
}

/* ============================================================
   PLAYBOOK SELECT PAGE
   ============================================================ */

.playbook-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
}

.playbook-card {
  background: var(--white);
  border: 2px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.playbook-card:hover {
  border-color: var(--grass-green);
  box-shadow: var(--shadow-md);
}

.playbook-card--selected {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-5);
}

.playbook-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-3);
}

.playbook-card__icon {
  width: 40px;
  height: 40px;
  background: var(--grass-green-alpha-10);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--grass-green);
}

.playbook-card__check {
  width: 24px;
  height: 24px;
  border: 2px solid var(--border);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--white);
  background: var(--white);
}

.playbook-card--selected .playbook-card__check {
  background: var(--grass-green);
  border-color: var(--grass-green);
}

.playbook-card__name {
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-2);
}

.playbook-card__desc {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-3);
  line-height: 1.4;
}

.playbook-card__meta {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--text-sm);
  color: var(--text-muted);
}

@media (max-width: 1024px) {
  .playbook-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 640px) {
  .playbook-grid { grid-template-columns: 1fr; }
}

/* ============================================================
   PROCESSING PAGE
   ============================================================ */

.processing-steps {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.processing-step {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.processing-step__icon {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  flex-shrink: 0;
}

.processing-step--current {
  background: var(--electric-blue-alpha-10);
  border-color: var(--electric-blue);
}

.processing-step--current .processing-step__icon {
  background: var(--electric-blue);
  color: var(--white);
}

.processing-step--complete .processing-step__icon {
  background: var(--grass-green);
  color: var(--white);
}

.processing-step__label {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}

.processing-step__desc {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ============================================================
   PAGE LOADING STATE
   ============================================================ */

.page-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-12);
  color: var(--text-muted);
}

/* ============================================================
   FINDINGS PAGE
   ============================================================ */

.findings-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.finding-item {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4) var(--space-5);
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.finding-item:hover {
  border-color: var(--grass-green);
  box-shadow: var(--shadow-md);
}

.finding-item__indicator {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.finding-item__indicator--critical {
  background: var(--critical-light);
  color: var(--critical);
}

.finding-item__indicator--warning {
  background: var(--warning-light);
  color: var(--warning);
}

.finding-item__indicator--info {
  background: var(--info-light);
  color: var(--info);
}

.finding-item__content {
  flex: 1;
}

.finding-item__title {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: 2px;
}

.finding-item__meta {
  display: flex;
  gap: var(--space-2);
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

/* ============================================================
   EXPORT PAGE
   ============================================================ */

.export-options {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.export-option {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4);
  border: 2px solid var(--border);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.export-option:hover {
  border-color: var(--grass-green);
}

.export-option--selected {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-5);
}

.export-option__icon {
  width: 48px;
  height: 48px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--grass-green);
  flex-shrink: 0;
}

.export-option__content {
  flex: 1;
}

.export-option__name {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin-bottom: 2px;
}

.export-option__desc {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.export-option__check {
  width: 24px;
  height: 24px;
  border: 2px solid var(--border);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--white);
}

.export-option--selected .export-option__check {
  background: var(--grass-green);
  border-color: var(--grass-green);
}

/* ============================================================
   CREATE PROJECT PAGE - 6 Column Domain Layout
   ============================================================ */

.domain-columns {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--space-3);
  min-height: 300px;
}

.domain-column {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--bg-tertiary);
}

.domain-column--active {
  border-color: var(--grass-green);
  background: var(--white);
}

.domain-column__header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3);
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.domain-column__header:hover {
  background: var(--grass-green-alpha-10);
}

.domain-column--active .domain-column__header {
  background: var(--domain-color, var(--grass-green));
  color: var(--white);
  border-bottom-color: transparent;
}

.domain-column__check {
  width: 16px;
  height: 16px;
  border: 1px solid var(--border);
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  color: var(--white);
  flex-shrink: 0;
}

.domain-column--active .domain-column__check {
  background: var(--white);
  border-color: var(--white);
  color: var(--domain-color, var(--grass-green));
}

.domain-column__name {
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  line-height: 1.2;
}

.domain-column__systems {
  flex: 1;
  padding: var(--space-2);
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow-y: auto;
  max-height: 280px;
}

.domain-column__systems--disabled {
  opacity: 0.4;
  pointer-events: none;
}

.domain-column__empty {
  font-size: var(--text-xs);
  color: var(--text-muted);
  text-align: center;
  padding: var(--space-4);
}

.system-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: var(--text-xs);
}

.system-row:hover {
  background: var(--grass-green-alpha-10);
}

.system-row--selected {
  background: var(--grass-green-alpha-10);
}

.system-row--disabled {
  cursor: not-allowed;
}

.system-row__check {
  width: 14px;
  height: 14px;
  border: 1px solid var(--border);
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  color: var(--white);
  flex-shrink: 0;
}

.system-row--selected .system-row__check {
  background: var(--grass-green);
  border-color: var(--grass-green);
}

.system-row__name {
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Engagement Type Grid */
.engagement-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-2);
}

.engagement-option {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.engagement-option:hover {
  border-color: var(--grass-green);
}

.engagement-option--selected {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-5);
}

.engagement-option__check {
  width: 18px;
  height: 18px;
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--white);
  color: var(--white);
  flex-shrink: 0;
  margin-top: 2px;
}

.engagement-option--selected .engagement-option__check {
  background: var(--grass-green);
  border-color: var(--grass-green);
}

.engagement-option__label {
  font-weight: var(--weight-medium);
}

.engagement-option__desc {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

/* Consultant Chips */
.consultant-chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.consultant-chip {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--border);
  border-radius: var(--radius-full);
  cursor: pointer;
  font-size: var(--text-sm);
  transition: all var(--transition-fast);
}

.consultant-chip:hover {
  border-color: var(--grass-green);
}

.consultant-chip--selected {
  background: var(--grass-green);
  border-color: var(--grass-green);
  color: var(--white);
}

.consultant-chip__remove {
  opacity: 0.7;
}

.consultant-chip__remove:hover {
  opacity: 1;
}

@media (max-width: 1200px) {
  .domain-columns { grid-template-columns: repeat(3, 1fr); }
  .engagement-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  .domain-columns { grid-template-columns: repeat(2, 1fr); }
  .engagement-grid { grid-template-columns: 1fr; }
}

/* ============================================================
   DASHBOARD - Clickable Stat Cards
   ============================================================ */

.stat-card--clickable {
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.stat-card--clickable:hover {
  border-color: var(--grass-green);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.stat-card__icon {
  position: absolute;
  top: var(--space-4);
  right: var(--space-4);
  color: var(--text-muted);
  opacity: 0.5;
}

.stat-card--clickable:hover .stat-card__icon {
  color: var(--grass-green);
  opacity: 1;
}

/* ============================================================
   CHAT PAGE WRAPPER
   ============================================================ */

.chat-page {
  display: flex;
  flex-direction: column;
  height: calc(100vh - var(--header-height) - 32px);
  max-height: calc(100vh - var(--header-height) - 32px);
  padding: var(--space-4);
}

.chat-page__header {
  margin-bottom: var(--space-4);
}

.chat-page__title-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.chat-page__icon {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-lg);
  background: var(--grass-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.chat-page__title-text {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.chat-page__title-text h1 {
  font-size: var(--text-xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: 0;
}

.chat-page__project-badge {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-sm);
  color: var(--grass-green);
  font-weight: var(--weight-medium);
}

.chat-page__project-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--grass-green);
}

.chat-page__subtitle {
  margin: var(--space-1) 0 0 52px;
  font-size: var(--text-sm);
  color: var(--text-muted);
}

.chat-page__content {
  flex: 1;
  min-height: 0;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.chat-page__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  height: 100%;
  color: var(--text-muted);
}

.chat-page__spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border);
  border-top-color: var(--grass-green);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.chat-page__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: var(--space-8);
  text-align: center;
}

.chat-page__empty-icon {
  width: 72px;
  height: 72px;
  border-radius: 16px;
  background: var(--grass-green-alpha-10);
  color: var(--grass-green);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: var(--space-4);
}

.chat-page__empty h2 {
  font-size: var(--text-lg);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: 0 0 var(--space-2) 0;
}

.chat-page__empty p {
  font-size: var(--text-sm);
  color: var(--text-muted);
  max-width: 320px;
  margin: 0 0 var(--space-5) 0;
}

.chat-page__empty-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  background: var(--grass-green);
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.chat-page__empty-btn:hover {
  background: var(--grass-green-hover);
  transform: translateY(-1px);
}

/* ============================================================
   CHAT COMPONENT - Modern AI Assistant Styling
   ============================================================ */

.chat {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--white);
}

/* Chat Header / Toolbar */
.chat__toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--border);
  background: var(--white);
}

.chat__toolbar-left {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.chat__toolbar-right {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.chat__mode-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: 6px 12px;
  background: var(--grass-green);
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  border-radius: var(--radius-md);
}

.chat__scope-select {
  padding: 6px 12px;
  font-size: var(--text-sm);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--white);
  color: var(--text-primary);
  cursor: pointer;
  transition: border-color var(--transition-fast);
}

.chat__scope-select:hover {
  border-color: var(--grass-green);
}

.chat__icon-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.chat__icon-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border-color: var(--border);
}

/* Intelligent Mode Banner */
.chat__intel-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-4);
  background: var(--grass-green-alpha-10);
  border-bottom: 1px solid var(--grass-green-alpha-20);
}

.chat__intel-banner-text {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-sm);
  color: var(--grass-green-dark);
}

.chat__intel-banner-text strong {
  font-weight: var(--weight-semibold);
}

.chat__intel-stats {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--text-xs);
  color: var(--grass-green-dark);
}

/* Messages Container */
.chat__messages {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  background: var(--bg-tertiary);
}

/* Empty State */
.chat__empty-state {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: var(--text-muted);
}

.chat__empty-icon {
  width: 80px;
  height: 80px;
  border-radius: 20px;
  background: linear-gradient(135deg, var(--grass-green-alpha-10) 0%, var(--electric-blue-alpha-10) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: var(--space-4);
}

.chat__empty-icon svg {
  width: 36px;
  height: 36px;
  color: var(--grass-green);
}

.chat__empty-state h3 {
  font-size: var(--text-lg);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: 0 0 var(--space-2) 0;
}

.chat__empty-state p {
  font-size: var(--text-sm);
  max-width: 400px;
  line-height: 1.6;
  margin: 0;
}

.chat__empty-sources {
  display: flex;
  gap: var(--space-4);
  margin-top: var(--space-4);
  font-size: var(--text-xs);
}

.chat__empty-sources > div {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  cursor: help;
}

/* Loading Indicator */
.chat__loading {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  color: var(--text-muted);
  font-size: var(--text-sm);
}

.chat__loading svg {
  animation: spin 1s linear infinite;
}

/* Input Area */
.chat__input-area {
  padding: var(--space-4);
  background: var(--white);
  border-top: 1px solid var(--border);
}

.chat__input-row {
  display: flex;
  gap: var(--space-3);
  align-items: flex-end;
}

.chat__textarea {
  flex: 1;
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-base);
  font-family: inherit;
  line-height: 1.5;
  border: 1.5px solid var(--border);
  border-radius: 12px;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  resize: none;
  min-height: 48px;
  max-height: 200px;
  transition: all var(--transition-fast);
}

.chat__textarea:focus {
  outline: none;
  border-color: var(--grass-green);
  background: var(--white);
  box-shadow: 0 0 0 3px var(--grass-green-alpha-10);
}

.chat__textarea::placeholder {
  color: var(--text-muted);
}

.chat__send-btn {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--grass-green);
  color: white;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.chat__send-btn:hover:not(:disabled) {
  background: var(--grass-green-hover);
  transform: scale(1.02);
}

.chat__send-btn:disabled {
  background: var(--border);
  cursor: not-allowed;
}

/* ============================================================
   MESSAGE BUBBLES - Modern Chat Style
   ============================================================ */

/* User Message */
.chat-msg {
  display: flex;
  gap: var(--space-3);
  max-width: 85%;
}

.chat-msg--user {
  flex-direction: row-reverse;
  margin-left: auto;
}

.chat-msg--assistant {
  margin-right: auto;
}

.chat-msg__avatar {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
}

.chat-msg--user .chat-msg__avatar {
  background: linear-gradient(135deg, var(--grass-green) 0%, var(--grass-green-dark) 100%);
  color: white;
}

.chat-msg--assistant .chat-msg__avatar {
  background: var(--grass-green-alpha-10);
  color: var(--grass-green);
}

.chat-msg__bubble {
  border-radius: 16px;
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-base);
  line-height: 1.6;
}

.chat-msg--user .chat-msg__bubble {
  background: linear-gradient(135deg, var(--grass-green) 0%, var(--grass-green-dark) 100%);
  color: white;
  border-bottom-right-radius: 4px;
}

.chat-msg--assistant .chat-msg__bubble {
  background: var(--white);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-bottom-left-radius: 4px;
}

/* System Message */
.chat-msg--system {
  justify-content: center;
  max-width: 100%;
}

.chat-msg--system .chat-msg__bubble {
  background: var(--bg-tertiary);
  color: var(--text-muted);
  font-size: var(--text-sm);
  padding: var(--space-2) var(--space-4);
  border-radius: 20px;
  border: none;
}

/* ============================================================
   INTELLIGENT RESPONSE CARD
   ============================================================ */

.chat-intel {
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 16px;
  max-width: 720px;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

/* Auto-applied Banner */
.chat-intel__auto-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-4);
  background: var(--amber-light);
  border-bottom: 1px solid rgba(217, 119, 6, 0.2);
  font-size: var(--text-sm);
  color: var(--amber);
}

.chat-intel__auto-actions {
  display: flex;
  gap: var(--space-2);
}

.chat-intel__auto-actions button {
  font-size: var(--text-xs);
  color: inherit;
  background: none;
  border: none;
  cursor: pointer;
  text-decoration: underline;
  opacity: 0.8;
}

.chat-intel__auto-actions button:hover {
  opacity: 1;
}

/* Header with Confidence */
.chat-intel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  background: var(--grass-green-alpha-5);
  border-bottom: 1px solid var(--border);
}

.chat-intel__header-left {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.chat-intel__header-icon {
  color: var(--grass-green);
}

.chat-intel__header-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--grass-green-dark);
}

.chat-intel__learned-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: 2px 8px;
  background: var(--grass-green-alpha-10);
  color: var(--grass-green);
  font-size: var(--text-xs);
  border-radius: 12px;
  margin-left: var(--space-2);
}

.chat-intel__confidence {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
}

.chat-intel__confidence--high {
  background: var(--grass-green-alpha-10);
  color: var(--grass-green-dark);
}

.chat-intel__confidence--medium {
  background: var(--electric-blue-alpha-10);
  color: var(--electric-blue);
}

.chat-intel__confidence--low {
  background: var(--amber-light);
  color: var(--amber);
}

/* Main Content */
.chat-intel__content {
  padding: var(--space-5);
}

.chat-intel__answer {
  font-size: var(--text-base);
  line-height: 1.7;
  color: var(--text-primary);
}

/* Render markdown-like content nicely */
.chat-intel__answer p {
  margin: 0 0 var(--space-3) 0;
}

.chat-intel__answer p:last-child {
  margin-bottom: 0;
}

.chat-intel__answer strong {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}

.chat-intel__answer ul,
.chat-intel__answer ol {
  margin: var(--space-3) 0;
  padding-left: var(--space-5);
}

.chat-intel__answer li {
  margin-bottom: var(--space-2);
}

.chat-intel__answer code {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 0.9em;
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 4px;
  color: var(--scarlet);
}

.chat-intel__answer pre {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  margin: var(--space-3) 0;
  overflow-x: auto;
  font-size: var(--text-sm);
}

.chat-intel__answer pre code {
  background: none;
  padding: 0;
  color: var(--text-primary);
}

/* Export Button */
.chat-intel__export {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--border);
}

.chat-intel__export-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--grass-green-alpha-10);
  color: var(--grass-green-dark);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  border: 1px solid var(--grass-green-alpha-20);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.chat-intel__export-btn:hover {
  background: var(--grass-green-alpha-20);
}

/* Insights Section */
.chat-intel__insights {
  margin: 0 var(--space-5) var(--space-4);
  background: var(--amber-light);
  border: 1px solid rgba(217, 119, 6, 0.2);
  border-radius: var(--radius-md);
  padding: var(--space-3);
}

.chat-intel__insights-header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.chat-intel__insights-header svg {
  color: var(--amber);
}

.chat-intel__insights-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--amber);
}

.chat-intel__insight {
  display: flex;
  align-items: flex-start;
  gap: var(--space-2);
  font-size: var(--text-sm);
  margin-top: var(--space-2);
}

.chat-intel__insight-dot {
  flex-shrink: 0;
  margin-top: 2px;
}

.chat-intel__insight-dot--high {
  color: var(--scarlet);
}

.chat-intel__insight-dot--medium {
  color: var(--amber);
}

/* Conflicts Section */
.chat-intel__conflicts {
  margin: 0 var(--space-5) var(--space-4);
  background: var(--scarlet-light);
  border: 1px solid rgba(153, 60, 68, 0.2);
  border-radius: var(--radius-md);
  padding: var(--space-3);
}

.chat-intel__conflicts-header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.chat-intel__conflicts-header svg {
  color: var(--scarlet);
}

.chat-intel__conflicts-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--scarlet);
}

.chat-intel__conflict {
  font-size: var(--text-sm);
  margin-top: var(--space-2);
}

.chat-intel__conflict-rec {
  color: var(--scarlet);
  font-size: var(--text-xs);
  margin-top: var(--space-1);
}

/* Sources Section */
.chat-intel__sources {
  border-top: 1px solid var(--border);
}

.chat-intel__sources-toggle {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.chat-intel__sources-toggle:hover {
  background: var(--bg-tertiary);
}

.chat-intel__sources-toggle-left {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.chat-intel__sources-content {
  padding: 0 var(--space-4) var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

/* Source Section (Reality, Intent, Best Practice) */
.chat-intel__source-section {
  border-radius: var(--radius-md);
  overflow: hidden;
}

.chat-intel__source-section--reality {
  border: 1px solid rgba(39, 102, 177, 0.3);
  background: var(--electric-blue-alpha-10);
}

.chat-intel__source-section--intent {
  border: 1px solid var(--grass-green-alpha-20);
  background: var(--grass-green-alpha-5);
}

.chat-intel__source-section--reference {
  border: 1px solid rgba(217, 119, 6, 0.3);
  background: var(--amber-light);
}

.chat-intel__source-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-3);
  background: transparent;
  border: none;
  cursor: pointer;
  width: 100%;
}

.chat-intel__source-header:hover {
  background: rgba(0, 0, 0, 0.02);
}

.chat-intel__source-header-left {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.chat-intel__source-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-primary);
}

.chat-intel__source-count {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.chat-intel__source-items {
  padding: 0 var(--space-3) var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.chat-intel__source-item {
  background: var(--white);
  border-radius: var(--radius-sm);
  padding: var(--space-2);
  font-size: var(--text-xs);
}

.chat-intel__source-item-name {
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  margin-bottom: var(--space-1);
}

.chat-intel__source-item-content {
  color: var(--text-muted);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Feedback Section */
.chat-intel__feedback {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  border-top: 1px solid var(--border);
}

.chat-intel__feedback-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  color: var(--text-muted);
  transition: all var(--transition-fast);
}

.chat-intel__feedback-btn:hover {
  border-color: var(--grass-green);
  color: var(--grass-green);
}

.chat-intel__feedback-btn--active-positive {
  background: var(--grass-green-alpha-10);
  border-color: var(--grass-green);
  color: var(--grass-green);
}

.chat-intel__feedback-btn--active-negative {
  background: var(--scarlet-light);
  border-color: var(--scarlet);
  color: var(--scarlet);
}

.chat-intel__copy-btn {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  background: transparent;
  border: none;
  font-size: var(--text-xs);
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.chat-intel__copy-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* ============================================================
   CLARIFICATION CARD
   ============================================================ */

.chat-clarify {
  max-width: 520px;
  background: var(--grass-green-alpha-5);
  border: 1px solid var(--grass-green-alpha-20);
  border-radius: 16px;
  padding: var(--space-5);
}

.chat-clarify__header {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
}

.chat-clarify__avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: var(--grass-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chat-clarify__title {
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: 0 0 var(--space-1) 0;
}

.chat-clarify__subtitle {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin: 0;
}

.chat-clarify__questions {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.chat-clarify__question {
  /* Individual question styling */
}

.chat-clarify__question-label {
  display: block;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  margin-bottom: var(--space-2);
}

.chat-clarify__options {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.chat-clarify__option {
  padding: var(--space-2) var(--space-3);
  background: var(--white);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.chat-clarify__option:hover {
  border-color: var(--grass-green);
}

.chat-clarify__option--selected {
  background: var(--grass-green);
  border-color: var(--grass-green);
  color: white;
}

.chat-clarify__submit {
  margin-top: var(--space-4);
  width: 100%;
  padding: var(--space-3);
  background: var(--grass-green);
  color: white;
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.chat-clarify__submit:hover {
  background: var(--grass-green-hover);
}

.chat-clarify__submit:disabled {
  background: var(--border);
  cursor: not-allowed;
}

/* ============================================================
   PAGE COMPONENTS - Shared across all pages
   ============================================================ */

/* Page Container */
.page {
  padding: var(--space-6);
  max-width: 1400px;
  margin: 0 auto;
}

.page__header {
  margin-bottom: var(--space-6);
}

.page__header-content {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.page__icon {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.page__title {
  font-size: var(--text-2xl);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  margin: 0;
  font-family: 'Sora', var(--font-body);
}

.page__subtitle {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin: var(--space-1) 0 0;
}

.page__content {
  margin-top: var(--space-4);
}

/* Tabs */
.tabs {
  display: flex;
  gap: var(--space-1);
  padding: var(--space-1);
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-6);
  width: fit-content;
}

.tabs__tab {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.tabs__tab:hover {
  color: var(--text-primary);
  background: var(--bg-secondary);
}

.tabs__tab--active {
  background: var(--bg-secondary);
  color: var(--grass-green);
  box-shadow: var(--shadow-sm);
}

/* Cards */
.card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.card__header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-4);
  border-bottom: 1px solid var(--border-light);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}

.card__body {
  padding: var(--space-4);
}

/* Upload Zone */
.upload-zone {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-6);
  border: 2px dashed var(--border);
  border-radius: var(--radius-lg);
  background: var(--bg-tertiary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.upload-zone:hover {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-5);
}

.upload-zone--active {
  border-color: var(--grass-green);
  background: var(--grass-green-alpha-10);
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: 2px var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
}

.badge--muted {
  background: var(--bg-tertiary);
  color: var(--text-secondary);
}

.badge--success {
  background: var(--success-light);
  color: var(--success);
}

.badge--warning {
  background: var(--warning-light);
  color: var(--warning);
}

.badge--critical {
  background: var(--critical-light);
  color: var(--critical);
}

.badge--info {
  background: var(--info-light);
  color: var(--info);
}

/* Search Input */
.search-input {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-muted);
}

.search-input:focus-within {
  border-color: var(--grass-green);
  background: var(--bg-secondary);
}

.search-input input {
  border: none;
  background: transparent;
  outline: none;
  font-size: var(--text-sm);
  color: var(--text-primary);
  width: 100%;
}

.search-input input::placeholder {
  color: var(--text-muted);
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.btn--primary {
  background: var(--grass-green);
  color: white;
}

.btn--primary:hover {
  background: var(--grass-green-hover);
}

.btn--ghost {
  background: transparent;
  color: var(--text-secondary);
}

.btn--ghost:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.btn--sm {
  padding: var(--space-1) var(--space-2);
}

/* List */
.list {
  border-top: 1px solid var(--border-light);
}

.list__item {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--border-light);
}

.list__item:last-child {
  border-bottom: none;
}

.list__item-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
}

.list__item-detail {
  margin-top: var(--space-3);
}

.list__item:hover {
  background: var(--bg-tertiary);
}

/* Utility Classes */
.spin {
  animation: spin 1s linear infinite;
}

.text-muted {
  color: var(--text-muted);
}

.text-sm {
  font-size: var(--text-sm);
}

.text-xs {
  font-size: var(--text-xs);
}

/* ============================================================
   UTILITY ANIMATIONS
   ============================================================ */

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.chat-msg,
.chat-intel,
.chat-clarify {
  animation: fadeIn 0.3s ease-out;
}
